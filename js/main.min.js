"use strict";function updateInputs(e){from=e.from,to=e.to,$inputFrom.prop("value",from),$inputTo.prop("value",to)}var loginButton=document.querySelector(".user-menu .login-button"),modalLogin=document.querySelector(".modal-login"),loginForm=document.querySelector(".modal-login .login-form"),loginInput=document.querySelector('.login-form input[name="login"]'),passwordInput=document.querySelector('.login-form input[name="password"]'),modalOverlay=document.querySelector(".modal-overlay"),isStorageSupport=!0,loginStorage="",nameStorage="",emailStorage="";try{loginStorage=localStorage.getItem("login"),nameStorage=localStorage.getItem("name"),emailStorage=localStorage.getItem("email")}catch(e){isStorageSupport=!1}document.body.contains(loginButton)&&loginButton.addEventListener("click",function(e){e.preventDefault(),modalLogin.classList.add("modal-show"),modalOverlay.style.display="block",loginStorage?(loginInput.value=loginStorage,passwordInput.focus()):loginInput.focus()}),document.body.contains(loginForm)&&loginForm.addEventListener("submit",function(e){loginInput.value&&passwordInput.value?isStorageSupport&&localStorage.setItem("login",loginInput.value):(e.preventDefault(),modalLogin.classList.add("modal-error"))});var slideBackwardButton=document.querySelector(".slider-controls .slider-backward-button"),slideForwardButton=document.querySelector(".slider-controls .slider-forward-button"),slides=document.querySelectorAll(".promo-slider-list .slider-item"),slideIndicators=document.querySelectorAll(".slide-indicators .slide-indicator");if(document.body.contains(slideBackwardButton)&&slideBackwardButton.addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(".promo-slider-list .slider-item-current"),o=Array.prototype.slice.call(t.parentNode.children).indexOf(t),n=document.querySelector(".slide-indicators .slide-indicator-current"),a=Array.prototype.slice.call(n.parentNode.children).indexOf(n);t.classList.remove("slider-item-current"),n.classList.remove("slide-indicator-current"),o||(o=slides.length),a||(a=slideIndicators.length),slideIndicators[a-1].classList.add("slide-indicator-current"),slides[o-1].classList.add("slider-item-current"),slides[o-1].classList.add("shift-left"),setTimeout(function(){slides[o-1].classList.remove("shift-left")},500)}),document.body.contains(slideForwardButton)&&slideForwardButton.addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(".promo-slider-list .slider-item-current"),o=Array.prototype.slice.call(t.parentNode.children).indexOf(t),n=document.querySelector(".slide-indicators .slide-indicator-current"),a=Array.prototype.slice.call(n.parentNode.children).indexOf(n);t.classList.remove("slider-item-current"),n.classList.remove("slide-indicator-current"),o===slides.length-1&&(o=-1),a===slideIndicators.length-1&&(a=-1),slideIndicators[a+1].classList.add("slide-indicator-current"),slides[o+1].classList.add("slider-item-current"),slides[o+1].classList.add("shift-right"),setTimeout(function(){slides[o+1].classList.remove("shift-right")},500)}),document.body.contains(slideIndicators[0]))for(var i=0;i<slideIndicators.length;i++)slideIndicators[i].addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(".promo-slider-list .slider-item-current"),o=document.querySelector(".slide-indicators .slide-indicator-current"),n=Array.prototype.slice.call(e.target.parentNode.children).indexOf(e.target);t.classList.remove("slider-item-current"),o.classList.remove("slide-indicator-current"),n>slides.length-1?slides[slides.length-1].classList.add("slider-item-current"):slides[n].classList.add("slider-item-current"),slideIndicators[n].classList.add("slide-indicator-current")});if(document.body.contains(document.querySelector(".price-range .js-range-slider"))){var $range=$(".price-range .js-range-slider"),$inputFrom=$(".price-wrapper .start-price"),$inputTo=$(".price-wrapper .end-price"),instance,min=0,max=35e3,from=0,to=0;$range.ionRangeSlider({skin:"flat",type:"double",min:min,max:max,from:0,to:3e4,onStart:updateInputs,onChange:updateInputs}),instance=$range.data("ionRangeSlider"),$inputFrom.on("input",function(){var e=$(this).prop("value");e<min?e=min:e>to&&(e=to),instance.update({from:e})}),$inputTo.on("input",function(){var e=$(this).prop("value");e<from?e=from:e>max&&(e=max),instance.update({to:e})})}var buyButtons=document.querySelectorAll(".manage-item-popup-menu .buy-button"),addToBookmarksButtons=document.querySelectorAll(".manage-item-popup-menu .add-to-bookmarks-button"),cartButton=document.querySelector(".main-header .cart-button"),bookmarksButton=document.querySelector(".main-header .bookmarks-button"),cartAmount=document.querySelector('.main-header [name="cart-amount"]'),bookmarksAmount=document.querySelector('.main-header [name="bookmarks-amount"]'),modalCartNotification=document.querySelector(".modal-cart-notification"),continueButton=document.querySelector(".modal-cart-notification .continue-button");if(document.body.contains(buyButtons[0]))for(var i=0;i<buyButtons.length;i++)buyButtons[i].addEventListener("click",function(e){e.preventDefault(),cartButton.classList.contains("not-empty")||cartButton.classList.add("not-empty"),cartAmount.innerHTML++,modalCartNotification.classList.add("modal-show"),modalOverlay.style.display="block"});if(document.body.contains(addToBookmarksButtons[0]))for(var i=0;i<addToBookmarksButtons.length;i++)addToBookmarksButtons[i].addEventListener("click",function(e){e.preventDefault(),bookmarksButton.classList.contains("not-empty")||bookmarksButton.classList.add("not-empty"),bookmarksAmount.innerHTML++});document.body.contains(continueButton)&&continueButton.addEventListener("click",function(e){e.preventDefault(),modalCartNotification.classList.remove("modal-show"),modalOverlay.style.display="none"});var contactUsButton=document.querySelector(".contacts .contact-us-button"),modalFeedback=document.querySelector(".modal-feedback"),feedbackForm=document.querySelector(".modal-feedback .feedback-form"),nameInput=document.querySelector('.feedback-form [name="name"]'),emailInput=document.querySelector('.feedback-form [name="email"]'),messageInput=document.querySelector('.feedback-form [name="message"]');document.body.contains(contactUsButton)&&contactUsButton.addEventListener("click",function(e){e.preventDefault(),modalFeedback.classList.add("modal-show"),modalOverlay.style.display="block",nameStorage?(nameInput.value=nameStorage,emailInput.focus()):emailStorage?(emailInput.value=emailStorage,messageInput.focus()):nameInput.focus()}),document.body.contains(feedbackForm)&&feedbackForm.addEventListener("submit",function(e){nameInput.value&&emailInput.value&&messageInput.value?isStorageSupport&&(localStorage.setItem("name",nameInput.value),localStorage.setItem("email",emailInput.value)):(e.preventDefault(),modalFeedback.classList.add("modal-error"))});var openMapLink=document.querySelector(".contacts .open-map-link"),modalMap=document.querySelector(".modal-map");document.body.contains(openMapLink)&&openMapLink.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.add("modal-show"),modalOverlay.style.display="block"});var modalWindows=document.querySelectorAll(".modal"),modalCloseBtns=document.querySelectorAll(".modal .modal-close");if(document.body.contains(modalCloseBtns[0]))for(var i=0;i<modalCloseBtns.length;i++)modalCloseBtns[i].addEventListener("click",function(e){e.preventDefault();for(var t=0;t<modalWindows.length;t++)modalWindows[t].classList.contains("modal-show")&&modalWindows[t].classList.remove("modal-show"),modalWindows[t].classList.contains("modal-error")&&modalWindows[t].classList.remove("modal-error");modalOverlay.style.display="none"});document.body.contains(modalWindows[0])&&window.addEventListener("keydown",function(e){if(27===e.keyCode&&modalWindows.classList.contains("modal-show")){e.preventDefault();for(var t=0;t<modalWindows.length;t++)modalWindows[t].classList.contains("modal-show")&&modalWindows[t].classList.remove("modal-show"),modalWindows[t].classList.contains("modal-error")&&modalWindows[t].classList.remove("modal-error");modalOverlay.style.display="none"}});